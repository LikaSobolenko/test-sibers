<section>
        <mat-drawer-container class="container" autosize>
            <mat-drawer #drawer class="sidenav" mode="side">
                <mat-form-field class="form-field">
                    <mat-label>User name</mat-label>
                    <input matInput 
                    [(ngModel)]="searchText"
                    (input)="applyFilter()" 
                    placeholder="Search">
                </mat-form-field>
                <div class="user-list">
                    @for (user of displayedUsers; track user;) {
                        <p class="user-item">
                            @if (currentchannel?.creator === userId && currentchannel?.creator != user.id) {
                                <mat-icon class="icon" (click)="deleteUser(user.id)">delete_outline</mat-icon>}
                            <span class="user-title">{{ user.name }}</span>
                        </p>
                    }
                </div>
            </mat-drawer>
            <div class="sidenav-content">
                <div class="userslist" (click)="drawer.toggle()">
                    <div>{{currentchannel?.members?.length}}</div>
                    <mat-icon class="icon">account_circle</mat-icon>
                </div>
                <div class="chat-container">
                    <div class="text-container">
                        @for (message of messages; track message.id) {
                            <div class="message">
                                <div class="message-items">
                                    <div class="message-username">{{ message.sender }}:</div>
                                    <div class="message-bubble">
                                        {{ message.content }}
                                    </div>
                                    <div class="message-date">{{ message.timestamp | date:'HH:mm' }}</div>
                                </div>
                            </div>
                        }
                    </div>

                    <div class="message-container">
                        <mat-form-field class="form-field message-field">
                            <input matInput [(ngModel)]="newMessage" (keydown.enter)="onKeyPress($any($event))"
                            placeholder="Message">
                        </mat-form-field>
                        <button mat-mini-fab  (click)="sendMessage()" [disabled]="!newMessage.trim()"> 
                            <mat-icon class="icon">send</mat-icon>
                        </button>
                    </div>
                </div>
            </div>
        </mat-drawer-container>
</section>
